# Backend Architecture Visual Reference

## ğŸ—ï¸ Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LEARNSMART PREP BACKEND                    â”‚
â”‚                    (Node.js + Express + MongoDB)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Express Server       â”‚
                    â”‚   Port 5000            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼     â–¼     â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
                â”‚       â”‚    â”‚    â”‚    â”‚
                â–¼       â–¼    â–¼    â–¼    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚        MIDDLEWARE LAYER           â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ â€¢ Express JSON Parser             â”‚
         â”‚ â€¢ CORS Enabled                    â”‚
         â”‚ â€¢ URL Encoded Parser              â”‚
         â”‚ â€¢ Auth Middleware (Ready)         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚        ROUTES LAYER (7)           â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ â€¢ /api/classes                    â”‚
         â”‚ â€¢ /api/groups                     â”‚
         â”‚ â€¢ /api/subjects                   â”‚
         â”‚ â€¢ /api/chapters                   â”‚
         â”‚ â€¢ /api/topics                     â”‚
         â”‚ â€¢ /api/questions                  â”‚
         â”‚ â€¢ /api/exams                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚     CONTROLLERS LAYER (7)         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ â€¢ Business Logic                  â”‚
         â”‚ â€¢ Input Validation                â”‚
         â”‚ â€¢ Error Handling                  â”‚
         â”‚ â€¢ Response Formatting             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      MODELS LAYER (7)             â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ â€¢ Mongoose Schemas                â”‚
         â”‚ â€¢ Field Validation                â”‚
         â”‚ â€¢ Default Values                  â”‚
         â”‚ â€¢ Relationships                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      DATABASE LAYER               â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚      MONGODB                      â”‚
         â”‚  (Collections & Documents)        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Data Flow Diagram

```
CLIENT REQUEST
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HTTP Request                   â”‚
â”‚  POST /api/questions            â”‚
â”‚  Content-Type: application/json â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Routing Layer                  â”‚
â”‚  (Routes: questionRoutes.js)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Controller                     â”‚
â”‚  questionController.js          â”‚
â”‚  â€¢ Validate input               â”‚
â”‚  â€¢ Handle business logic        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Model (Mongoose)               â”‚
â”‚  Question.js                    â”‚
â”‚  â€¢ Schema definition            â”‚
â”‚  â€¢ Field validation             â”‚
â”‚  â€¢ Relationship setup           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB Database               â”‚
â”‚  â€¢ Insert/Update/Query          â”‚
â”‚  â€¢ Persist data                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼ (Response travels back)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JSON Response                  â”‚
â”‚  {                              â”‚
â”‚    success: true,               â”‚
â”‚    data: {...}                  â”‚
â”‚  }                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
   CLIENT
```

## ğŸ—‚ï¸ Database Hierarchy

```
DATABASE: learnsmart-prep
â”‚
â”œâ”€â”€ COLLECTION: classes
â”‚   â””â”€â”€ Document: { _id, name, description, createdAt, updatedAt }
â”‚
â”œâ”€â”€ COLLECTION: groups
â”‚   â””â”€â”€ Document: { _id, name, classIdâ†’Class, description, createdAt, updatedAt }
â”‚       â””â”€â”€ Relationship: classId references classes._id
â”‚
â”œâ”€â”€ COLLECTION: subjects
â”‚   â””â”€â”€ Document: { _id, name, groupIdâ†’Group, description, createdAt, updatedAt }
â”‚       â””â”€â”€ Relationship: groupId references groups._id
â”‚
â”œâ”€â”€ COLLECTION: chapters
â”‚   â””â”€â”€ Document: { _id, name, subjectIdâ†’Subject, description, createdAt, updatedAt }
â”‚       â””â”€â”€ Relationship: subjectId references subjects._id
â”‚
â”œâ”€â”€ COLLECTION: topics
â”‚   â””â”€â”€ Document: { _id, name, chapterIdâ†’Chapter, description, createdAt, updatedAt }
â”‚       â””â”€â”€ Relationship: chapterId references chapters._id
â”‚
â”œâ”€â”€ COLLECTION: questions
â”‚   â””â”€â”€ Document: { 
â”‚       _id, 
â”‚       questionTextEn, 
â”‚       questionTextBn, 
â”‚       options: [{ text, isCorrect }],
â”‚       explanation,
â”‚       subjectIdâ†’Subject,
â”‚       chapterIdâ†’Chapter,
â”‚       topicIdâ†’Topic,
â”‚       difficulty: (easy|medium|hard),
â”‚       tags: [],
â”‚       createdAt, 
â”‚       updatedAt 
â”‚   }
â”‚       â””â”€â”€ Relationships: subjectId, chapterId, topicId
â”‚
â””â”€â”€ COLLECTION: exams
    â””â”€â”€ Document: { 
        _id, 
        title, 
        duration, 
        totalMarks,
        questionIds: [â†’Question, â†’Question],
        status: (draft|live),
        description,
        publishedAt,
        createdAt, 
        updatedAt 
    }
        â””â”€â”€ Relationship: questionIds array references questions._id
```

## ğŸ”„ Request/Response Flow

### Example: Create a Question

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: Client Sends Request                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POST /api/questions                                          â”‚
â”‚ {                                                            â”‚
â”‚   "questionTextEn": "What is velocity?",                    â”‚
â”‚   "options": [...],                                         â”‚
â”‚   "subjectId": "60d5ec49c1234567890abcde",                 â”‚
â”‚   ...                                                        â”‚
â”‚ }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: Route Handler (questionRoutes.js)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ router.post('/', createQuestion)                            â”‚
â”‚ â€¢ Routes request to createQuestion controller               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: Controller Logic (questionController.js)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ exports.createQuestion = async (req, res) => {             â”‚
â”‚   â€¢ Validates required fields                               â”‚
â”‚   â€¢ Checks options array (min 2)                            â”‚
â”‚   â€¢ Calls Question.create(data)                             â”‚
â”‚   â€¢ Populates relations                                     â”‚
â”‚ }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: Model & Database (Question.js + MongoDB)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Schema validates all fields                               â”‚
â”‚ â€¢ Field types checked                                       â”‚
â”‚ â€¢ Default values applied                                    â”‚
â”‚ â€¢ Document inserted into MongoDB                            â”‚
â”‚ â€¢ New documents ID returned                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: Populate Relations                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Fetch related Subject document                            â”‚
â”‚ â€¢ Fetch related Chapter document                            â”‚
â”‚ â€¢ Fetch related Topic document                              â”‚
â”‚ â€¢ Merge with question document                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 6: Server Response                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ res.status(201).json({                                      â”‚
â”‚   success: true,                                            â”‚
â”‚   data: {                                                   â”‚
â”‚     _id: "60d5ec49c1234567890abcde",                       â”‚
â”‚     questionTextEn: "What is velocity?",                   â”‚
â”‚     options: [...],                                         â”‚
â”‚     subjectId: { _id: "...", name: "Physics" },           â”‚
â”‚     chapterId: { ... },                                     â”‚
â”‚     topicId: { ... },                                       â”‚
â”‚     createdAt: "2024-02-20T10:30:00Z"                      â”‚
â”‚   }                                                         â”‚
â”‚ })                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 7: Client Receives Response                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: 201 Created                                         â”‚
â”‚ Full question with populated relations ready to use         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¡ API Endpoint Map

```
ROOT: /api

â”œâ”€â”€ /classes (5 endpoints)
â”‚   â”œâ”€â”€ GET     / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ All classes
â”‚   â”œâ”€â”€ GET     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Single class
â”‚   â”œâ”€â”€ POST    / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Create class
â”‚   â”œâ”€â”€ PUT     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Update class
â”‚   â””â”€â”€ DELETE  /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Delete class
â”‚
â”œâ”€â”€ /groups (5 endpoints)
â”‚   â”œâ”€â”€ GET     / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ All groups
â”‚   â”œâ”€â”€ GET     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Single group
â”‚   â”œâ”€â”€ GET     ?classId= â”€â”€â”€â”€â”€â”€ Groups by class
â”‚   â”œâ”€â”€ POST    / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Create group
â”‚   â”œâ”€â”€ PUT     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Update group
â”‚   â””â”€â”€ DELETE  /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Delete group
â”‚
â”œâ”€â”€ /subjects (5 endpoints)
â”‚   â”œâ”€â”€ GET     / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ All subjects
â”‚   â”œâ”€â”€ GET     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Single subject
â”‚   â”œâ”€â”€ GET     ?groupId= â”€â”€â”€â”€â”€â”€ Subjects by group
â”‚   â”œâ”€â”€ POST    / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Create subject
â”‚   â”œâ”€â”€ PUT     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Update subject
â”‚   â””â”€â”€ DELETE  /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Delete subject
â”‚
â”œâ”€â”€ /chapters (5 endpoints)
â”‚   â”œâ”€â”€ GET     / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ All chapters
â”‚   â”œâ”€â”€ GET     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Single chapter
â”‚   â”œâ”€â”€ GET     ?subjectId= â”€â”€â”€â”€ Chapters by subject
â”‚   â”œâ”€â”€ POST    / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Create chapter
â”‚   â”œâ”€â”€ PUT     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Update chapter
â”‚   â””â”€â”€ DELETE  /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Delete chapter
â”‚
â”œâ”€â”€ /topics (5 endpoints)
â”‚   â”œâ”€â”€ GET     / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ All topics
â”‚   â”œâ”€â”€ GET     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Single topic
â”‚   â”œâ”€â”€ GET     ?chapterId= â”€â”€â”€â”€ Topics by chapter
â”‚   â”œâ”€â”€ POST    / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Create topic
â”‚   â”œâ”€â”€ PUT     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Update topic
â”‚   â””â”€â”€ DELETE  /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Delete topic
â”‚
â”œâ”€â”€ /questions (8 endpoints) â­ ADVANCED
â”‚   â”œâ”€â”€ GET     / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ All questions
â”‚   â”œâ”€â”€ GET     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Single question
â”‚   â”œâ”€â”€ GET     ?search= â”€â”€â”€â”€â”€â”€â”€ Search questions
â”‚   â”œâ”€â”€ GET     ?difficulty= â”€â”€â”€ Filter by level
â”‚   â”œâ”€â”€ GET     ?subjectId= â”€â”€â”€â”€ By subject + topic + chapter
â”‚   â”œâ”€â”€ POST    / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Create single
â”‚   â”œâ”€â”€ POST    /bulk â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Import many
â”‚   â”œâ”€â”€ PUT     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Update question
â”‚   â””â”€â”€ DELETE  /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Delete question
â”‚
â”œâ”€â”€ /exams (7 endpoints) â­ SPECIAL
â”‚   â”œâ”€â”€ GET     / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ All exams
â”‚   â”œâ”€â”€ GET     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Single exam
â”‚   â”œâ”€â”€ POST    / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Create exam
â”‚   â”œâ”€â”€ PUT     /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Update exam
â”‚   â”œâ”€â”€ PATCH   /:id/publish â”€â”€â”€ Go live
â”‚   â”œâ”€â”€ PATCH   /:id/unpublish â”€ Take offline
â”‚   â””â”€â”€ DELETE  /:id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Delete exam
â”‚
â””â”€â”€ /health (1 endpoint)
    â””â”€â”€ GET     / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Server status
```

## ğŸ” Authentication Flow (When Enabled)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client                       â”‚
â”‚  (Frontend)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1. Send login credentials
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server: /api/auth/login     â”‚
â”‚  (Not built yet - ready for) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 2. Generate JWT token
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Return: { token: "..." }    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 3. Store token (localStorage/cookie)
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Every subsequent request     â”‚
â”‚  Header: Authorization        â”‚
â”‚  Value: Bearer <token>        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 4. Send authenticated request
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Middleware: auth.js         â”‚
â”‚  â€¢ Extract token             â”‚
â”‚  â€¢ Verify signature          â”‚
â”‚  â€¢ Decode to get user info   â”‚
â”‚  â€¢ Attach to req.user        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼ (verified)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Controller/Route Handler    â”‚
â”‚  â€¢ Access req.user data      â”‚
â”‚  â€¢ Perform operation         â”‚
â”‚  â€¢ Return protected data     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ Scalability Architecture

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   CDN     â”‚
                    â”‚  (Static) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–²
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Cache  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             (Redis)   â”‚     Query      â”‚
        â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
        â”‚                                â”‚
        â–¼                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Load Balancer      â”‚        â”‚  Rate Limiter   â”‚
â”‚   (Distribute        â”‚        â”‚  (API          â”‚
â”‚    requests)         â”‚        â”‚   throttling)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                â–²
        â”œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”          â”‚
        â”‚    â”‚    â”‚    â”‚    â”‚          â”‚
        â–¼    â–¼    â–¼    â–¼    â–¼          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  Express Servers (Multiple) â”‚â”€â”€â”€â”˜
    â”‚  (Horizontal Scaling)       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   MongoDB Cluster           â”‚
    â”‚   (Replica Sets + Sharding) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
        â–¼         â–¼
    [Shard1]  [Shard2]
```

## ğŸš€ Deployment Steps

```
Development
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ npm run dev    â”‚
â”‚ Port 5000      â”‚
â”‚ Local MongoDB  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
Staging
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ npm start              â”‚
â”‚ Environment: staging   â”‚
â”‚ MongoDB Atlas          â”‚
â”‚ Deploy to Staging      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
Testing
     â”‚
     â–¼
Production
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ npm start              â”‚
â”‚ Environment: productionâ”‚
â”‚ MongoDB Atlas (prod)   â”‚
â”‚ Deploy to Cloud        â”‚
â”‚ Monitor & Scale        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š Quick File Reference

```
server.js                    â—„â”€â”€â”€ START HERE
  â”‚
  â”œâ”€ config/db.js           â—„â”€â”€â”€ Database setup
  â”‚
  â”œâ”€ routes/
  â”‚  â””â”€ classRoutes.js       â—„â”€â”€â”€ Entry to routes
  â”‚     â””â”€ controllers/classController.js
  â”‚        â””â”€ models/Class.js
  â”‚
  â””â”€ middleware/
     â””â”€ auth.js              â—„â”€â”€â”€ Optional JWT
```

---

**Visual Reference Guide - Production Architecture Ready** âœ…
